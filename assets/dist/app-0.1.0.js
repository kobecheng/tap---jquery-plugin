define("/assets/dist/guide/guide",["./view","jquery","hammer","mustache","backbone","iscroll"],function(a){var b,c,d;return b=a("jquery"),b("body").append('<div id="app-guide"></div>'),c=a("./view"),d=new c,localStorage.showAppGuide?b("#app-guide").remove():(d.render(),localStorage.showAppGuide="true")}),define("/assets/dist/guide/view",["hammer","mustache","backbone","iscroll"],function(a,b,c){var d,e,f,g;return d=a("hammer"),f=a("mustache"),e=a("backbone"),g=a("iscroll").iScroll,c.exports=e.View.extend({tpl:'<div id="scroller-guide-slide"><ul class="slide"><li class="guide-first">\n<div class="guide-des">在寝室 <span>&nbsp;</span>教室 <span>&nbsp;</span>或者图书馆</div>\n<div class="guide-des guide-des-right">如果你喜欢宅着</div>\n</li><li class="guide-second">\n<div class="guide-des">又无需面对繁琐的选择</div>\n<div class="guide-des guide-des-right">如果你期望饭来张口</div>\n</li><li class="guide-third">\n<div class="guide-des">能够瞬间到达你的手中</div>\n<div class="guide-des guide-des-right">如果你渴望的美味</div>\n</li><li class="guide-last">\n<div class="guide-des">让这一切不再是奢想</div>\n<div class="guide-des guide-des-right">打开水果巴士</div>\n<div class="get-in">向左滑动&nbsp;进入应用<i class="icon-angle-right"></i></div>\n</li><li class="blank" style="position: relative; height: 100%;"></li></ul></div><ul class="guide-slide-page">\n{{#slide_page}}\n<li>\n<span>\n<i class="icon-circle"></i>\n</span>\n</li>\n{{/slide_page}}\n</ul>',el:"#app-guide",initialize:function(){},render:function(){var a;return a=[0,1,2,3],this.$el.html(f.render(this.tpl,{slide_page:a})),d(function(){var a,b;return b=d("#app-guide .guide-slide-page li"),b.eq(0).addClass("active"),a=new g("app-guide",{checkDOMChanges:!0,snap:!0,momentum:!1,hScrollbar:!1,onScrollEnd:function(){return b.removeClass("active"),b.eq(this.currPageX).addClass("active"),0===this.currPageX?d("#app-guide").removeClass("transparent"):d("#app-guide").addClass("transparent"),4===this.currPageX?d("#app-guide").remove():void 0}})})}})}),define("/assets/dist/layout/layout",["./nav/nav","../stateMachine/nav","./main/main","../plugin/imgLoad/imgLoad","hammer","util","jquery","iscroll"],function(a,b,c){var d,e,f;return f=a("./nav/nav"),e=a("./main/main"),d=function(a){return a?f(a):f({type:"main"})},c.exports=d}),define("/assets/dist/layout/nav/nav",["../../stateMachine/nav","hammer","util"],function(a,b,c){var d,e,f,g;return d=a("hammer"),f=a("../../stateMachine/nav"),g='<div id="nav"><div class="location"><div class="back">\n<i class="icon-angle-left"></i>\n</div><div class="position"></div></div><div class="main">\n<a href="#" id="logo"></a>\n</div><a id="cart-button" href="#buy/cart/read">\n<span class="num">\n<span style="color:#FFF;">0</span>\n</span>\n</a>\n</div></div><div id="nav-sub"><ul><li class="active">\n<a href="#commodity/hot">热销</a>\n</li><li>\n<a href="#commodity/cat">分类</a>\n</li><li>\n<a href="#user/info">账户</a>\n</li></ul></div>',d(document.body).prepend(g),d("#nav .location .back").hammer().on("tap",function(){return history.back()}),e=function(a){var b;switch(f[a.type].active(),a.type){case"main":if(b=location.hash,d("#nav-sub .active").removeClass("active"),d("#nav-sub a").each(function(){var a;return a=d(this),a.attr("href")===b?a.parent().addClass("active"):void 0}),"#user/entrance"===b)return d("#nav-sub ul li").eq(2).addClass("active");break;case"location":return d("#nav .location .position").html(a.position)}},c.exports=e}),function(){define("/assets/dist/stateMachine/nav",["util"],function(a,b,c){var d,e,f,g;return d=a("util"),g=new d.StateMachine,f={activate:function(){return $("#nav .main").fadeIn("fast"),$("#nav-sub").fadeIn("fast"),$("#wrapper").addClass("main")},deactivate:function(){return $("#nav .main").hide(),$("#nav-sub").hide(),$("#wrapper").removeClass("main")}},e={activate:function(){return $("#nav .location").fadeIn("fast")},deactivate:function(){return $("#nav .location").hide("fast")}},g.add(f),g.add(e),c.exports={main:f,location:e}})}.call(this),define("/assets/dist/layout/main/main",["../../plugin/imgLoad/imgLoad","jquery","iscroll","hammer"],function(a,b,c){var d,e,f,g,h;return d=a("jquery"),e=a("iscroll").iScroll,h='<div id="wrapper">\n<div id="scroller">\n<!--\n<div id="pullDown">\n<span class="pullDownIcon"></span><span class="pullDownLabel">Pull down to refresh...</span>\n</div>\n-->\n<div class="content">\n</div></div>\n</div>',d(document.body).append(h),document.addEventListener("touchmove",function(a){return a.preventDefault()},!1),document.addEventListener("touchstart",function(a){var b;return b=a.target,"SELECT"!==b.tagName&&"INPUT"!==b.tagName&&"TEXTAREA"!==b.tagName?(a.preventDefault(),a.stopPropagation()):void 0},!1),f=a("../../plugin/imgLoad/imgLoad"),g=new e("wrapper",{checkDOMChanges:!0,hScrollbar:!1,useTransform:!1,onRefresh:f,onBeforeScrollStart:function(a){var b;for(b=a.target;1!==b.nodeType;)b=b.parentNode;return"SELECT"!==b.tagName&&"INPUT"!==b.tagName&&"TEXTAREA"!==b.tagName&&a.preventDefault(),clearTimeout(this.hoverTimeout),this.hoverTimeout=setTimeout(function(){return d(b).hasClass("ui-hover")?"A"===d(b)[0].tagName?(d(b).addClass("ui-hover"),d(b).parents("li").addClass("ui-hover")):void 0:(d(b).addClass("ui-hover"),d(b).parents("li").addClass("ui-hover"))},10),this.hoverTarget=b},onScrollMove:function(){return d(this.hoverTarget).removeClass("ui-hover"),d(this.hoverTarget).parents("li").removeClass("ui-hover")},onBeforeScrollEnd:function(){return d(this.hoverTarget).removeClass("ui-hover"),d(this.hoverTarget).parents("li").removeClass("ui-hover")}}),c.exports=g}),function(){define("/assets/dist/plugin/imgLoad/imgLoad",["hammer"],function(a,b,c){var d,e,f,g,h;return d=a("hammer"),h=window.innerHeight,g=h,e=6,f=function(){return 0===d("img[real-src]:visible").size()?!1:d("img[real-src]:visible").each(function(){return g>=this.y?(d(this).attr({src:d(this).attr("real-src")}),d(this).removeAttr("real-src")):void 0})},d(window).on("scroll",f),d("body").on("dragend",f),c.exports=f})}.call(this),define("/assets/dist/touch/touch",["hammer"],function(a){var b;return b=a("hammer"),b(function(){return b("body").hammer().on("touch","select",function(){return b("#hack-select-input")[0]?void 0:b(this).after('<input id="hack-select-input" style="opacity:0;width:1px;height:1px;position:absolute; z-index: -99;" name="" type="text" />')}),b("body").hammer().on("release","select",function(a){return a.stopPropagation(),b("#hack-select-input").focus().click(),b(this).click().focus()}),b("body").hammer().on("release","input",function(a){return a.stopPropagation(),b(this).click()}),b("body").hammer().on("tap","a",function(a){var c;return a.preventDefault(),a.stopPropagation(),c=b(this).attr("href"),/^#/.test(c)?(location.href=c,!1):location.hash!==c?location.hash=c:void 0}),b("body").hammer().on("touch","a",function(a){return a.preventDefault(),a.stopPropagation(),b(this).addClass("ui-hover")}),b("body").hammer().on("release","a",function(){return b(this).removeClass("ui-hover")})})}),define("/assets/dist/plugin/ui/ui",["./number/number","./radio/radio","hammer"],function(a,b,c){return c.exports={number:a("./number/number"),radio:a("./radio/radio")}}),define("/assets/dist/plugin/ui/number/number",["hammer"],function(a){var b,c;return b=a("hammer"),c=function(a){return a=Math.abs(a),isNaN(a)&&(a=1),a},b("body").on("tap",".fruit-ui-number .minus",function(){var a,d;return a=b(".fruit-ui-number .number-value"),d=a.val(),d=c(d),1===d?(a.val(d),!1):a.val(d-1)}),b("body").on("tap",".fruit-ui-number .plus",function(){var a,d;return a=b(".fruit-ui-number .number-value"),d=a.val(),d=c(d),a.val(d+1)})}),define("/assets/dist/plugin/ui/radio/radio",["hammer"],function(a){var b;return b=a("hammer"),b("body").on("tap",".fruit-ui-radio li",function(){var a;return a=b(this).parents(".fruit-ui-radio"),a.find(".active").removeClass("active"),b(this).addClass("active").attr("tabindex",-1).focus()})}),define("/assets/dist/commodity/commodity",["./hot/hot","../stateMachine/main","../layout/layout","../layout/nav/nav","../stateMachine/nav","../layout/main/main","../plugin/imgLoad/imgLoad","./hot/slide/slide","./hot/slide/view","./hot/slide/model","../class/model","../serverApi","../http/http","../message/message","../plugin/mapping/mapping","../error/error","../remoteLog/log","../cache/cache","./hot/list/list","./hot/list/view","../plugin/countdown/countdown","./hot/list/model","./cat/cat","./cat/view","./cat/model","./list/list","./list/view","../plugin/titleFit/titleFit","./list/model","./item/item","./item/view","../buy/cart/create/create","../buy/cart/create/model","./item/model","backbone","util","hammer","jquery","iscroll","mustache","underscore"],function(a,b,c){var d,e,f,g;return e=a("./hot/hot"),d=a("./cat/cat"),g=a("./list/list"),f=a("./item/item"),c.exports=function(a,b){switch(a){case"hot":return e();case"cat":return d();case"list":return g(b);case"item":return f(b);default:return e()}}}),define("/assets/dist/commodity/hot/hot",["../../stateMachine/main","../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","./slide/slide","./slide/view","./slide/model","../../class/model","../../serverApi","../../http/http","../../message/message","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","./list/list","./list/view","../../plugin/countdown/countdown","./list/model","backbone","util","hammer","jquery","iscroll","mustache","underscore"],function(a,b,c){var d,e,f,g,h,i;return d=a("backbone"),h=a("../../stateMachine/main"),e=a("../../layout/layout"),i='<div id="hot-slide"></div>\n<div id="hot-list"></div>',$("#scroller .content").append(i),g=a("./slide/slide"),f=a("./list/list"),c.exports=function(){return d.Router.prototype.navigate("commodity/hot"),g.reload(),f.reload(),h.hot.active(),e()}}),function(){define("/assets/dist/stateMachine/main",["util"],function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;return d=a("util"),t=new d.StateMachine,i={activate:function(){return $("#hot-slide").show(),$("#hot-list").show()},deactivate:function(){return $("#hot-slide").hide(),$("#hot-list").hide()}},e={activate:function(){return $("#cat-ul").show()},deactivate:function(){return $("#cat-ul").hide()}},l={activate:function(){return $("#list-ul").show()},deactivate:function(){return $("#list-ul").hide()}},k={activate:function(){return $("#item-detail").show()},deactivate:function(){return $("#item-detail").hide()}},t.add(i),t.add(e),t.add(l),t.add(k),j={activate:function(){return $("#user-info").show()},deactivate:function(){return $("#user-info").hide()}},m={activate:function(){return $("#login").show()},deactivate:function(){return $("#login").hide()}},s={activate:function(){return $("#register").show()},deactivate:function(){return $("#register").hide()}},g={activate:function(){return $("#entrance").show()},deactivate:function(){return $("#entrance").hide()}},o={activate:function(){return $("#orderList").show()},deactivate:function(){return $("#orderList").hide()}},n={activate:function(){return $("#orderDetail").show()},deactivate:function(){return $("#orderDetail").hide()}},t.add(j),t.add(m),t.add(s),t.add(g),t.add(o),t.add(n),q={activate:function(){return $("#read-address-list").show()},deactivate:function(){return $("#read-address-list").hide()}},f={activate:function(){return $("#create-address").show()},deactivate:function(){return $("#create-address").hide()}},u={activate:function(){return $("#update-address").show()},deactivate:function(){return $("#update-address").hide()}},t.add(q),t.add(f),t.add(u),r={activate:function(){return $("#cart-read").show()},deactivate:function(){return $("#cart-read").hide()}},v={activate:function(){return $("#cart-update").show()},deactivate:function(){return $("#cart-update").hide()}},h={activate:function(){return $("#generate-order").show()},deactivate:function(){return $("#generate-order").hide()}},p={activate:function(){return $("#buy-pay").show()},deactivate:function(){return $("#buy-pay").hide()}},t.add(r),t.add(v),t.add(h),t.add(p),c.exports={hot:i,cat:e,list:l,item:k,info:j,login:m,entrance:g,register:s,orderList:o,orderDetail:n,readAddressList:q,createAddress:f,updateAddress:u,readCart:r,updateCart:v,generateOrder:h,pay:p}})}.call(this),define("/assets/dist/commodity/hot/slide/slide",["./view","./model","../../../class/model","../../../serverApi","../../../http/http","../../../message/message","../../../plugin/mapping/mapping","../../../error/error","../../../remoteLog/log","../../../cache/cache","jquery","backbone","mustache","iscroll","underscore","hammer"],function(a,b,c){var d,e,f,g;return e=a("./view"),d=a("./model"),f=new d("hotSlide"),g=new e(f),c.exports={stop:function(){return g.stop()},reload:function(){return g.reload()}}}),define("/assets/dist/commodity/hot/slide/view",["jquery","backbone","mustache","iscroll"],function(a,b,c){var d,e,f,g;return d=a("jquery"),e=a("backbone"),f=a("mustache"),g=a("iscroll").iScroll,c.exports=e.View.extend({tpl:'<div id="scroller-hot-slide"><ul class="slide">\n{{#slide}}\n<li>\n<a href="{{href}}">\n<img src="{{src}}" alt="" />\n</a>\n</li>\n{{/slide}}\n</ul></div><ul class="slide-page">\n{{#slide_page}}\n<li>\n<span>\n<i class="icon-circle"></i>\n</span>\n</li>\n{{/slide_page}}\n</ul>',el:"#hot-slide",initialize:function(a){return this.model=a,this.model.on(""+this.model.type+":success",this.render,this)},reload:function(){return this.model.get()},render:function(a){var b,c,e,h,i,j;return h=this,c=a,e=function(){j=[];for(var a=0,b=c.length;b>=0?b>a:a>b;b>=0?a++:a--)j.push(a);return j}.apply(this),this.$el.html(f.render(this.tpl,{slide:c,slide_page:e})),i=window.innerWidth,b=i/(480/172),d("#hot-slide").css({height:b}),d("#hot-slide #scroller-hot-slide").css({width:i*c.length}),d("#hot-slide ul.slide li").css({width:i,height:b}),d(function(){var a;return a=d("#hot-slide .slide-page li"),a.eq(0).addClass("active"),new g("hot-slide",{checkDOMChanges:!0,snap:!0,momentum:!1,hScrollbar:!1,onScrollEnd:function(){return a.removeClass("active"),a.eq(this.currPageX).addClass("active")}})})}})});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};define("/assets/dist/commodity/hot/slide/model",["../../../class/model","../../../serverApi","../../../http/http","../../../message/message","../../../plugin/mapping/mapping","../../../error/error","../../../remoteLog/log","../../../cache/cache","underscore","backbone","jquery","hammer","mustache"],function(a,b,c){var d,e;return e=a("../../../class/model"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(e),c.exports=d}),define("/assets/dist/class/model",["../serverApi","../http/http","../message/message","../plugin/mapping/mapping","../error/error","../remoteLog/log","../cache/cache","underscore","backbone","jquery","hammer","mustache"],function(a,b,c){var d,e,f,g,h,i;return i=a("underscore"),e=a("backbone"),d=a("../serverApi"),h=a("../http/http"),f=a("../cache/cache"),g=function(){function a(a){this.type=a,i.extend(this,e.Events),this.cache=new f(d[this.type].url,d[this.type].expire),this.on(""+this.type+":success",this.cache.set,this.cache)}return a.prototype.get=function(){var a,b,c;return a=Array.prototype.slice.call(arguments),c={},d[this.type].key.forEach(function(b,d){return a[d]?c[b]=a[d]:void 0}),b=this.cache.get(c),b?(this.trigger(""+this.type+":success",b,c,!0),!1):h({url:d[this.type].url,data:c,caller:this,namespace:this.type,map:d[this.type].map})},a.prototype.clearCache=function(a){return this.cache.clear(a)},a}(),c.exports=g}),define("/assets/dist/serverApi",[],function(a,b,c){var d;return d=seajs.config.data.server_root,c.exports={hotSlide:{url:""+d+"/mobile/cms/hotSilde",key:[""],expire:864e5,map:{link:"href",pic:"src"}},hotList:{url:""+d+"/mobile/cms/indexList",key:[""],expire:12e4,map:{itemid:"id",itemname:"name",itemimg:"src",price:"price",volume:"sales",old_price:"old_price",begintime:"start_time",endtime:"end_time"}},cat:{url:""+d+"/mobile/cms/categoryList",key:[""],expire:864e5,map:{catid:"id",catname:"name",image:"src",volume:"sales"}},list:{url:""+d+"/mobile/cms/categoryItemList",key:["catid"],expire:864e5,map:{itemid:"id",itemname:"name",itemimg:"src",volume:"sales"}},item:{url:""+d+"/mobile/cms/itemDetail",key:["itemid"],expire:18e4,map:{itemid:"id",itemimg:"src",itemname:"name",specification_list:"norm",spec:"norm_name",productid:"norm_id",volume:"sales",evaluate_good_rate:"comment",view:"hit",price:"price"}},userInfo:{url:""+d+"/mobile/user/currentInfo",key:[],expire:864e5,map:{uname:"username",uid:"uid",email:"email"}},login:{url:""+d+"/mobile/user/login",key:["email","password"]},logout:{url:""+d+"/mobile/user/logout",key:[]},register:{url:""+d+"/mobile/user/register",key:["email","password","repassword"]},orderList:{url:""+d+"/mobile/trade/order/list",key:["type"],expire:0,map:{tradeid:"tradeid",payment:"payment",reveiver_name:"reveiver",status:"status",totalfee:"totalfee",order:"order",addtime:"addtime",itemid:"itemid",itemimg:"itemimg",itemname:"itemname",orderid:"orderid"}},orderDetail:{url:""+d+"/mobile/trade/order/detail",key:["tradeid"],expire:0,map:{order_list:"order_list",trade:"trade",tradeid:"tradeid",status:"status",uname:"uname",totalfee:"totalfee",addtime:"addtime",receiver_address:"address",receiver_province:"receiver_province",receiver_name:"receiver_name",receiver_city:"receiver_city",receiver_district:"receiver_district",receiver_link:"phone",posttype:"posttype",isfinish:"isfinish",user_pay_url:"url",itemname:"itemname",itemimg:"itemimg",itemid:"itemid",itemfee:"itemfee",uid:"uid",price:"price",num:"num",productid:"productid"}},readAddressList:{url:""+d+"/mobile/trade/address/list",expire:0,key:[""],map:{addressid:"addressid",uid:"uid",receiver:"receiver",province:"province",city:"city",district:"district",address:"address",link:"phone",zipcode:"zipcode"}},addressDetail:{url:""+d+"/mobile/trade/address/detail",key:["addressid"],map:{addressid:"addressid",uid:"uid",receiver:"receiver",province:"province",city:"city",district:"district",address:"address",link:"phone",zipcode:"zipcode"}},cancelOrder:{url:""+d+"/mobile/trade/order/cancel",key:["tradeid"]},saveAddress:{url:""+d+"/mobile/trade/address/save",key:["addressid","receiver","province","city","district","address","link"]},createAddress:{url:""+d+"/mobile/trade/address/save",key:["uid","receiver","province","city","district","address","link"]},deleteAddress:{url:""+d+"/mobile/trade/address/delete",expire:0,key:["addressid"]},setDefaultAddress:{url:""+d+"/mobile/trade/address/setDefault",key:["addressid"],expire:0},getDefaultAddress:{url:""+d+"/mobile/trade/address/getDefault",key:[""],map:{receiver:"name",address:"detail",link:"tel",addressid:"id"}},readCart:{url:""+d+"/mobile/trade/cart/list",key:[""],expire:500,map:{itemfee:"total",item_list:"list",itemid:"id",keyid:"keyid",itemname:"name",itemimg:"src",price:"price",productid:"norm_id",norm_price:"norm_price",norm_name:"norm_name",quantity:"number",item_total:"total"}},updateCart:{url:""+d+"/mobile/trade/cart/edit",key:["keyid","quantity","productid"],expire:0,map:{item_list:"list"}},createCart:{url:""+d+"/mobile/trade/cart/add",key:["itemid","quantity","productid"],expire:0,map:{item_list:"list"}},deleteCart:{url:""+d+"/mobile/trade/cart/delete",key:["keyid"],expire:0,map:{item_list:"list"}},generateOrder:{url:""+d+"/index.php?model=buy&action=ordercomp",key:["addressid","wayid","posttime","postimmediate","paymentid","memo","tax_company"],expire:0,map:{tradeid:"id",user_pay_url:"url"}},businessHours:{url:""+d+"/mobile/opentime/getConfig",key:[""],expire:144e4,map:{end_warning_time:"warning_time",end_time:"close_time",start_time:"open_time"}}}}),define("/assets/dist/http/http",["../message/message","../plugin/mapping/mapping","../error/error","../remoteLog/log","jquery","hammer","underscore","backbone","mustache"],function(a,b,c){var d,e,f,g,h,i;return d=a("jquery"),f=a("../message/message"),i=new f,h=a("../plugin/mapping/mapping"),e=a("../error/error"),g=function(a){return i.open("loading"),d.ajaxSetup({dataType:"JSON",type:"POST",error:function(b){return i.close(),e(b,a.caller,a.namespace),a.caller.trigger(""+a.namespace+":error",b,a.data)},success:function(b){var c;return d("#fruit-ui-message .icon-spinner")[0]&&i.close(),null!==b.err?(e(b.err),a.caller.trigger(""+a.namespace+":error",b.err,a.data)):(c=h(a.map,b.data),a.caller.trigger(""+a.namespace+":success",c,a.data))}}),d.ajax(a)},c.exports=g}),define("/assets/dist/message/message",["hammer","underscore","backbone","mustache"],function(a,b,c){var d,e,f,g,h,i,j;return d=a("hammer"),j=a("underscore"),e=a("backbone"),g=a("mustache"),i='<div id="fruit-ui-message" >\n<div class="message" tabindex="-1">\n{{#success}}\n<i class="icon-ok"></i>\n{{/success}}{{#tip}}\n<i class="icon-warning-sign"></i>\n{{/tip}}{{#error}}\n<i class="icon-remove"></i>\n{{/error}}{{#loading}}\n<i class="icon-spinner icon-spin"></i>\n{{/loading}}{{#message}}\n<span>{{{message}}}</span>\n{{/message}}\n</div>\n</div>',h="fruit-ui-message",localStorage.zonda_message_id="1",d("body").hammer().on("tap","#"+h+" .message",function(){return d("#"+h).remove()}),f=function(){var a=this;return this.id=(new Date).valueOf(),this.timer="",this.close=function(){var b;return b=d("#"+h),console.log(b.prop("message-id")),a.id===b.prop("message-id")&&b.remove(),a},this.open=function(b,c,e){var f;return clearTimeout(a.timer),d("input").blur(),d("#"+h).remove(),d("body").append(g.render(i,{success:function(){return"success"===b?!0:void 0}(),error:function(){return"error"===b?!0:void 0}(),tip:function(){return"tip"===b?!0:void 0}(),loading:function(){return"loading"===b?!0:void 0}(),message:c})),d("#"+h).prop("message-id",a.id),f=1300,e&&(f=e),a.timer=setTimeout(function(){return a.close()},f),a},this},c.exports=f}),define("/assets/dist/plugin/mapping/mapping",["underscore"],function(a,b,c){var d,e,f;return f=a("underscore"),e="",d=function(a,b,c){var g;return f.isArray(a)?(g=[],f.each(a,function(a){return d(a,g)})):(g={},f.each(d.map,function(b,c){return a&&a[c]&&(g[b]=a[c],f.isArray(g[b])||f.isObject(g[b]))?d(g[b],g,b):void 0})),f.isUndefined(b)?e=g:f.isArray(b)?b.push(g):c?b[c]=g:b=g},c.exports=function(a,b){return d.map=a,d(b),e}}),define("/assets/dist/error/error",["../remoteLog/log","../message/message","jquery","backbone","hammer","underscore","mustache"],function(a,b,c){var d,e,f,g,h;return f=a("../remoteLog/log"),d=a("jquery"),e=a("backbone"),g=a("../message/message"),h=new g,window.onerror=function(){var a;return a=Array.prototype.slice(arguments),f({error:a})},c.exports=function(a,b,c){if(console.error(a),b&&console.error(b),b&&console.error(c),window.zonda_error=a,f({url:location.href,error:a}),"string"!=typeof a)return h.open("error",'<p class="label label-important">\n  '+a.status+"\n</p>\n<p>糟糕，服务器发生错误了 >_<</p>");switch(a){case"请登录":return setTimeout(function(){return e.Router.prototype.navigate("user/entrance",{trigger:!0})},10);default:return h.open("tip",a)}}}),define("/assets/dist/remoteLog/log",["jquery"],function(a,b,c){var d;return d=a("jquery"),c.exports=function(a){return d.ajax({url:"http://play.sxz.dashu.us/log/?a=record",type:"POST",data:{log:JSON.stringify(a)},success:function(){},error:function(){}})}}),define("/assets/dist/cache/cache",[],function(){var a,b,c,d;return d="zonda_model_cache",c=0,(void 0===localStorage[d]||"object"!=typeof JSON.parse(localStorage[d]))&&(localStorage[d]=JSON.stringify({})),b={get:function(){return JSON.parse(localStorage[d])},set:function(a){return localStorage[d]=JSON.stringify(a)}},a=function(){function a(a,d){var e;this.url=a,this.expire=d,this.expire||(this.expire=c),e=b.get(),e[this.url]||(e[this.url]={},b.set(e))}return a.prototype.get=function(a){var c,d,e,f;return d=JSON.stringify(a),f=b.get(),f[this.url]&&f[this.url][d]?(c=f[this.url][d],e=(new Date).valueOf(),this.expire+c.timestamp>e?c.data:!1):!1},a.prototype.set=function(a,c,d){var e,f;return d?!1:(f=b.get(),f[this.url]||(f[this.url]={}),e=JSON.stringify(c),f[this.url][e]={timestamp:(new Date).valueOf(),data:a},b.set(f))},a.prototype.clear=function(a){var c,d;return d=b.get(),a?(c=JSON.stringify(a),delete d[this.url][c]):delete d[this.url],b.set(d)},a}()}),define("/assets/dist/commodity/hot/list/list",["./view","../../../plugin/countdown/countdown","./model","../../../class/model","../../../serverApi","../../../http/http","../../../message/message","../../../plugin/mapping/mapping","../../../error/error","../../../remoteLog/log","../../../cache/cache","jquery","backbone","mustache","underscore","hammer"],function(a,b,c){var d,e,f,g;return e=a("./view"),d=a("./model"),f=new d("hotList"),g=new e(f),c.exports={reload:function(){return g.reload()}}}),define("/assets/dist/commodity/hot/list/view",["../../../plugin/countdown/countdown","jquery","backbone","mustache"],function(a,b,c){var d,e,f,g,h;return d=a("jquery"),e=a("backbone"),f=a("mustache"),g=a("../../../plugin/countdown/countdown"),h=seajs.config.data.base,c.exports=e.View.extend({tpl:'<ul>\n{{#list}}\n<li class="hot-list-li"><a href="#/commodity/item/{{id}}" class="thumb">\n<img real-src="{{src}}_160x160.jpg" src={{blank_img}} alt="{{name}}" title="{{name}}" />\n</a><a class="block" href="#commodity/item/{{id}}"><span class="name">{{name}}</span>{{#old_price}}\n<span class="now-price">\n抢购价：￥\n<span class="now-price-money">\n{{price}} 元\n</span><span class="price">\n原价：￥\n{{old_price}} 元\n</span><span class="countdown" start_time="{{start_time}}" end_time="{{end_time}}"></span>\n</span>\n{{/old_price}}{{^old_price}}\n<span class="price">\n价格：￥\n{{price}} 元\n</span>\n<span class="sales">\n销量：\n{{sales}}\n</span>\n{{/old_price}}</a><a class="arrow" href="#commodity/item/{{id}}">\n</a></li>\n{{/list}}\n</ul>',el:"#hot-list",initialize:function(a){return this.model=a,this.model.on(""+this.model.type+":success",this.render,this)},reload:function(){return this.model.get()},render:function(a){var b,c,e,i,j;return j=this,e=a,e.forEach(function(a){return a.name.length>7?a.name=""+a.name.substr(0,6)+"...":void 0}),this.$el.html(f.render(this.tpl,{list:e,blank_img:""+h+"ui/images/blank.png"})),this.$el.find("img[real-src]").each(function(a){return a>3?!1:d(this).attr({src:d(this).attr("real-src")})}),b=this.$el.find(".countdown"),i=b.attr("start_time"),c=b.attr("end_time"),g(i,c,b,{not_start:"抢购时间:{{start}}-{{end}}",doing:"剩余:<span>{{h}}</span>小时<span>{{m}}</span>分<span>{{s}}</span>",end:"抢购结束咯~"})}})}),define("/assets/dist/plugin/countdown/countdown",["jquery","mustache"],function(a,b,c){var d,e;return d=a("jquery"),e=a("mustache"),c.exports=function(a,b,c,f){var g;return g=d(c),function(){var c,d,h,i;return f=f,h=a,c=b,d=parseInt((new Date).valueOf()/1e3),i=setInterval(function(){var a,b,i,j,k,l,m;return d+=1,h-d>0&&(k=new Date(1e3*h).toString().substr(16,5),j=new Date(1e3*c).toString().substr(16,5),g.html(e.render(f.not_start,{start:k,end:j}))),0>h-d&&c-d>0&&(b=c-d,a=Math.floor(b/86400),i=Math.floor((b-86400*a)/3600),l=Math.floor((b-86400*a-3600*i)/60),m=Math.floor(b-86400*a-3600*i-60*l),g.html(e.render(f.doing,{day:a,h:i,m:l,s:m}))),0>c-d?g.html(f.end):void 0},1e3)}()}});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};define("/assets/dist/commodity/hot/list/model",["../../../class/model","../../../serverApi","../../../http/http","../../../message/message","../../../plugin/mapping/mapping","../../../error/error","../../../remoteLog/log","../../../cache/cache","underscore","backbone","jquery","hammer","mustache"],function(a,b,c){var d,e;return e=a("../../../class/model"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(e),c.exports=d}),define("/assets/dist/commodity/cat/cat",["../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","../../stateMachine/main","./view","./model","../../class/model","../../serverApi","../../http/http","../../message/message","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","jquery","hammer","util","iscroll","backbone","mustache","underscore"],function(a,b,c){var d,e,f,g,h,i;return d=a("jquery"),g=a("../../layout/layout"),h=a("../../stateMachine/main"),d("#scroller .content").append('<div id="cat-ul"></div>'),f=a("./view"),e=a("./model"),i=new f(new e("cat")),c.exports=function(){return i.reload(),h.cat.active(),g()}}),define("/assets/dist/commodity/cat/view",["../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","hammer","backbone","mustache","util","jquery","iscroll"],function(a,b,c){var d,e,f,g,h,i;return d=a("hammer"),e=a("backbone"),f=a("mustache"),i=seajs.config.data.base,h=a("../../layout/layout"),g=a("../../plugin/imgLoad/imgLoad"),c.exports=e.View.extend({tpl:'<ul>\n{{#list}}\n<li>\n<a name="{{name}}" class="thumb cat-cell" href="#commodity/list/{{id}}">\n<img real-src="{{src}}_310x310.jpg" src="{{blank_img}}" alt="" />\n</a>\n<a name="{{name}}" class="name cat-cell" href="#commodity/list/{{id}}">{{name}}</a>\n</li>\n{{/list}}\n</ul>',el:"#cat-ul",initialize:function(a){return this.model=a,this.model.on(""+this.model.type+":success",this.render,this),this.$el.hammer().on("tap",".cat-cell",function(){var a;return a=d(this).attr("name"),h({type:"location",position:a})})},reload:function(){return this.$el.empty(),this.model.get()},render:function(a){var b;return b=this,this.$el.html(f.render(this.tpl,{list:a,blank_img:""+i+"ui/images/blank.png"}))}})});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};define("/assets/dist/commodity/cat/model",["../../class/model","../../serverApi","../../http/http","../../message/message","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","underscore","backbone","jquery","hammer","mustache"],function(a,b,c){var d,e;return e=a("../../class/model"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(e),c.exports=d}),define("/assets/dist/commodity/list/list",["../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","./view","../../plugin/titleFit/titleFit","./model","../../class/model","../../serverApi","../../http/http","../../message/message","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","../../stateMachine/main","jquery","hammer","util","iscroll","backbone","mustache","underscore"],function(a,b,c){var d,e,f,g,h,i;return d=a("jquery"),g=a("../../layout/layout"),d("#scroller .content").append('<div id="list-ul"></div>'),f=a("./view"),e=a("./model"),h=a("../../stateMachine/main"),i=new f(new e("list")),c.exports=function(a){return i.reload(a),h.list.active()}}),define("/assets/dist/commodity/list/view",["../../plugin/titleFit/titleFit","../../plugin/imgLoad/imgLoad","hammer","backbone","mustache"],function(a,b,c){var d,e,f,g,h,i;return d=a("hammer"),e=a("backbone"),f=a("mustache"),i=a("../../plugin/titleFit/titleFit"),h=seajs.config.data.base,g=a("../../plugin/imgLoad/imgLoad"),c.exports=e.View.extend({tpl:'<ul>\n{{#list}}\n<li>\n<a class="thumb" href="#commodity/item/{{id}}">\n<img real-src="{{src}}_310x310.jpg" src="{{blank_img}}" alt="" />\n</a>\n<a class="name" href="#commodity/item/{{id}}">\n<span>{{{name}}}</span>\n<span class="sales">销量：{{sales}}</span>\n</a>\n</li>\n{{/list}}\n</ul>',el:"#list-ul",initialize:function(a){return this.model=a,this.model.on(""+this.model.type+":success",this.render,this)
},reload:function(a){return this.$el.empty(),this.model.get(a)},render:function(a){var b;return b=this,a.forEach(function(a){return a.name=i(a.name,7,10,14,12)}),this.$el.html(f.render(this.tpl,{list:a,blank_img:""+h+"ui/images/blank.png"}))}})}),define("/assets/dist/plugin/titleFit/titleFit",[],function(a,b,c){return c.exports=function(a,b,c,d,e){var f;return b||(b=9),c||(c=12),d||(d=18),e||(e=14),f=a.length,f>=b&&(b+c)/2>=f&&(a='<span style="font-size:'+d+'px!important;padding: 0 3px;">'+a+"</span>"),f>=c&&(a='<span style="font-size:'+e+'px!important;padding: 0 3px;">'+a+"</span>"),a}});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};define("/assets/dist/commodity/list/model",["../../class/model","../../serverApi","../../http/http","../../message/message","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","underscore","backbone","jquery","hammer","mustache"],function(a,b,c){var d,e;return e=a("../../class/model"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(e),c.exports=d}),define("/assets/dist/commodity/item/item",["../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","./view","../../buy/cart/create/create","../../message/message","../../buy/cart/create/model","../../class/model","../../serverApi","../../http/http","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","../../plugin/titleFit/titleFit","./model","../../stateMachine/main","jquery","hammer","util","iscroll","backbone","mustache","underscore"],function(a,b,c){var d,e,f,g,h,i;return d=a("jquery"),g=a("../../layout/layout"),d("#scroller .content").append('<div id="item-detail"></div>'),f=a("./view"),e=a("./model"),h=a("../../stateMachine/main"),i=new f(new e("item")),c.exports=function(a){return i.reload(a),h.item.active()}}),define("/assets/dist/commodity/item/view",["../../buy/cart/create/create","../../message/message","../../buy/cart/create/model","../../class/model","../../serverApi","../../http/http","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","../../plugin/titleFit/titleFit","hammer","backbone","mustache","underscore","jquery"],function(a,b,c){var d,e,f,g,h;return d=a("hammer"),e=a("backbone"),f=a("mustache"),g=a("../../buy/cart/create/create"),h=a("../../plugin/titleFit/titleFit"),c.exports=e.View.extend({tpl:'{{#item}}<div class="box"><div class="thumb">\n<img src="{{src}}" alt="" />\n</div><div class="add-info">\n<span class="comment">好评率:{{comment}}</span>\n<span class="sales">销量:{{sales}}</span>\n<span class="hit">浏览量:{{hit}}</span>\n</div></div><div class="main-info">\n<span class="name">{{{name}}}</span>\n{{^has_norm}}\n<span class="price">{{price}}元</span>\n{{/has_norm}}\n</div><div class="norm-and-number">\n{{#has_norm}}\n<select class="norm">\n{{#norm}}\n<option value="{{norm_id}}" price="{{norm_price}}">{{norm_name}} / {{price}}元</option>\n{{/norm}}\n</select>\n{{/has_norm}}<div class="number fruit-ui-number">\n<span class="minus">\n<i class="icon-minus"></i>\n</span>\n<input type="number" min="1" class="number-value" value="1" />\n<span class="plus">\n<i class="icon-plus"></i>\n</span>\n</div>\n</div>{{^is_update}}\n<div class="add-to-cart fruit-ui-btn fruit-ui-btn-success">\n<i class="icon-plus-sign"></i>\n加入购物车\n</div>\n{{/is_update}}{{#is_update}}\n<div class="update-to-cart fruit-ui-btn fruit-ui-btn-success">\n<i class="icon-ok-sign"></i>\n保存到购物车\n</div><div class="delete-to-cart fruit-ui-btn">\n<i class="icon-minus-sign"></i>\n从购物车中删除\n</div>{{/is_update}}{{/item}}',el:"#item-detail",initialize:function(a){var b=this;return this.model=a,this.model.on(""+this.model.type+":success",this.render,this),this.$el.on("tap",".add-to-cart",function(){var a,c;return c=b.$el.find(".number-value").val(),a=b.$el.find(".norm").val(),g(b.id,c,a)})},reload:function(a){return this.id=a,this.$el.empty(),this.model.get(a)},render:function(a){var b;return b=this,a.has_norm=a.norm&&0!==a.norm.length?!0:!1,a.name=h(a.name,9,12),this.$el.html(f.render(this.tpl,{item:a}))}})}),define("/assets/dist/buy/cart/create/create",["../../../message/message","./model","../../../class/model","../../../serverApi","../../../http/http","../../../plugin/mapping/mapping","../../../error/error","../../../remoteLog/log","../../../cache/cache","hammer","underscore","backbone","mustache","jquery"],function(a,b,c){var d,e,f,g,h;return d=a("../../../message/message"),g=new d,f=function(a){return $("#cart-button .num").html(a.list.length)},e=a("./model"),h=new e("createCart"),h.on(""+h.type+":success",function(a){return f(a),g.open("success","已加入购物车中~",1300)}),c.exports=function(a,b,c,d){return d&&(f=d),h.set(a,b,c)}});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};define("/assets/dist/buy/cart/create/model",["../../../class/model","../../../serverApi","../../../http/http","../../../message/message","../../../plugin/mapping/mapping","../../../error/error","../../../remoteLog/log","../../../cache/cache","underscore","backbone","jquery","hammer","mustache"],function(a,b,c){var d,e;return e=a("../../../class/model"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.set=function(){return this.get.apply(this,arguments)},b}(e),c.exports=d});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};define("/assets/dist/commodity/item/model",["../../class/model","../../serverApi","../../http/http","../../message/message","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","underscore","backbone","jquery","hammer","mustache"],function(a,b,c){var d,e;return e=a("../../class/model"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(e),c.exports=d}),define("/assets/dist/user/user",["./entrance/entrance","../layout/layout","../layout/nav/nav","../stateMachine/nav","../layout/main/main","../plugin/imgLoad/imgLoad","./entrance/view","../stateMachine/main","./info/info","./info/view","./info/model","../class/model","../serverApi","../http/http","../message/message","../plugin/mapping/mapping","../error/error","../remoteLog/log","../cache/cache","./login/login","./login/view","./login/model","./register/register","./register/view","./register/model","./orderList/orderList","./orderList/view","./orderList/model","./orderDetail/orderDetail","./orderDetail/view","./orderDetail/model","backbone","jquery","hammer","util","iscroll","mustache","underscore"],function(a,b,c){var d,e,f,g,h,i,j;return d=a("backbone"),e=a("./entrance/entrance"),f=a("./info/info"),g=a("./login/login"),j=a("./register/register"),i=a("./orderList/orderList"),h=a("./orderDetail/orderDetail"),c.exports=function(a,b){switch(a){case"entrance":return e();case"info":return f();case"login":return g();case"register":return j();case"orderList":return b?i(b):(i("inOrders"),d.Router.prototype.navigate("user/orderList/inOrders"));case"orderDetail":return h(b);default:return f()}}}),define("/assets/dist/user/entrance/entrance",["../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","./view","../../stateMachine/main","jquery","hammer","util","iscroll","backbone","mustache"],function(a,b,c){var d,e,f,g,h;return d=a("jquery"),f=a("../../layout/layout"),d("#scroller .content").append('<div id="entrance"></div>'),e=a("./view"),g=a("../../stateMachine/main"),h=new e,c.exports=function(){return h.render(),g.entrance.active(),f()}}),define("/assets/dist/user/entrance/view",["../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","hammer","backbone","mustache","util","jquery","iscroll"],function(a,b,c){var d,e,f,g;return d=a("hammer"),e=a("backbone"),f=a("mustache"),g=a("../../layout/layout"),c.exports=e.View.extend({tpl:'<h2>请先登陆或注册水果巴士</h2>\n<div class="login-btn fruit-ui-btn fruit-ui-btn-success" name="#user/login">登陆</div>\n<div class="register-btn fruit-ui-btn" name="#user/register">注册</div>',el:"#entrance",initialize:function(){return this.$el.hammer().on("tap",".fruit-ui-btn",function(){var a;return a=d(this).attr("name"),e.Router.prototype.navigate(""+a,{trigger:!0})})},render:function(){return this.$el.html(this.tpl)}})}),define("/assets/dist/user/info/info",["../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","./view","./model","../../class/model","../../serverApi","../../http/http","../../message/message","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","../../stateMachine/main","jquery","hammer","util","iscroll","backbone","mustache","underscore"],function(a,b,c){var d,e,f,g,h,i;return d=a("jquery"),g=a("../../layout/layout"),d("#scroller .content").append('<div id="user-info"></div>'),f=a("./view"),e=a("./model"),h=a("../../stateMachine/main"),i=new f(new e("userInfo")),c.exports=function(){return i.reload(),h.info.active(),g()}}),define("/assets/dist/user/info/view",["../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","hammer","backbone","mustache","util","jquery","iscroll"],function(a,b,c){var d,e,f,g;return d=a("hammer"),e=a("backbone"),f=a("mustache"),g=a("../../layout/layout"),c.exports=e.View.extend({tpl:'<div class="info-header">\n<div class="wellcome">\n欢迎您！{{#userinfo}} {{username}} {{/userinfo}}\n</div>\n<div href="#user/entrance" class="logout">退出</div>\n</div><div class="my-orders info-list">\n<h2>我的订单</h2>\n<ul>\n<li name="#user/orderList/inOrders" class="fruit-ui-arrow-btn">进行中的订单</li>\n<li name="#user/orderList/completeOrders" class="fruit-ui-arrow-btn">已完成的订单</li>\n</ul>\n</div><div class="my-info info-list">\n<h2>我的个人信息</h2>\n<ul>\n<li name="#address/read" class="fruit-ui-arrow-btn">收货地址</li>\n</ul>\n</div>',el:"#user-info",initialize:function(a){var b=this;return this.model=a,this.model.on(""+this.model.type+":success",this.render,this),this.model.on("logout:success",function(){return e.Router.prototype.navigate("user/entrance",{trigger:!0})}),this.$el.hammer().on("tap",".info-list ul li",function(){var a;return a=d(this).attr("name"),e.Router.prototype.navigate(""+a,{trigger:!0})}),this.$el.hammer().on("tap",".logout",function(){return b.model.logout(),b.model.clearCache()})},reload:function(){return this.$el.empty(),this.model.get()},render:function(a){return this.$el.html(f.render(this.tpl,{userinfo:a}))}})});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};define("/assets/dist/user/info/model",["../../class/model","../../serverApi","../../http/http","../../message/message","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","underscore","backbone","jquery","hammer","mustache"],function(a,b,c){var d,e,f,g;return f=a("../../class/model"),d=a("../../serverApi"),g=a("../../http/http"),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.logout=function(){var a,b;return a=Array.prototype.slice.call(arguments),b={},d.logout.key.forEach(function(c,d){return a[d]?b[c]=a[d]:void 0}),g({url:d.logout.url,data:b,caller:this,namespace:"logout",map:d.logout.map})},b}(f),c.exports=e}),define("/assets/dist/user/login/login",["../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","./view","../../message/message","./model","../../class/model","../../serverApi","../../http/http","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","../../stateMachine/main","jquery","hammer","util","iscroll","backbone","mustache","underscore"],function(a,b,c){var d,e,f,g,h,i;return d=a("jquery"),g=a("../../layout/layout"),d("#scroller .content").append('<div id="login"></div>'),f=a("./view"),e=a("./model"),h=a("../../stateMachine/main"),i=new f(new e("login")),c.exports=function(){return i.render(),h.login.active(),g({type:"location",position:"登陆水果巴士"})}}),define("/assets/dist/user/login/view",["../../message/message","../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","hammer","backbone","mustache","underscore","util","jquery","iscroll"],function(a,b,c){var d,e,f,g,h,i,j;return d=a("hammer"),e=a("backbone"),g=a("mustache"),j=a("underscore"),f=a("../../message/message"),i=new f,h=a("../../layout/layout"),c.exports=e.View.extend({tpl:'<form>\n<input tabindex="1" type="url" class="email fruit-ui-input" placeholder="邮箱"/>\n<input tabindex="2" type="password" class="passwd fruit-ui-input" placeholder="密码"/>\n</form><div tabindex="3" class="login-btn fruit-ui-btn fruit-ui-btn-success">登陆</div>\n<!--\n<div class="forget-passwd">忘记密码?</div>\n-->',el:"#login",initialize:function(a){var b;return this.model=a,b=this,this.$el.hammer().on("tap",".login-btn",function(){var a,c;return a=j.escape(b.$el.find(".email").val().replace(/\s/g,"")),c=j.escape(b.$el.find(".passwd").val().replace(/\s/g,"")),""===a?(i.open("tip","请填写邮箱"),void 0):""!==c?b.model.get(a,c):(i.open("tip","密码不能为空"),void 0)}),this.model.on(""+this.model.type+":success",function(){return history.go(-2)})},render:function(){return this.$el.html(this.tpl)}})});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};define("/assets/dist/user/login/model",["../../class/model","../../serverApi","../../http/http","../../message/message","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","underscore","backbone","jquery","hammer","mustache"],function(a,b,c){var d,e;return e=a("../../class/model"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(e),c.exports=d}),define("/assets/dist/user/register/register",["../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","./view","../../message/message","./model","../../class/model","../../serverApi","../../http/http","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","../../stateMachine/main","jquery","hammer","util","iscroll","backbone","mustache","underscore"],function(a,b,c){var d,e,f,g,h,i;return d=a("jquery"),g=a("../../layout/layout"),d("#scroller .content").append('<div id="register"></div>'),f=a("./view"),e=a("./model"),h=a("../../stateMachine/main"),i=new f(new e("register")),c.exports=function(){return i.render(),h.register.active(),g({type:"location",position:"注册水果巴士"})}}),define("/assets/dist/user/register/view",["../../message/message","../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","hammer","backbone","mustache","underscore","util","jquery","iscroll"],function(a,b,c){var d,e,f,g,h,i,j;return d=a("hammer"),e=a("backbone"),g=a("mustache"),j=a("underscore"),f=a("../../message/message"),i=new f,h=a("../../layout/layout"),c.exports=e.View.extend({tpl:'<form>\n<input type="text" class="email fruit-ui-input" placeholder="邮箱"/>\n<input type="password" class="passwd fruit-ui-input" placeholder="密码"/>\n<input type="password" class="re-passwd fruit-ui-input" placeholder="确认密码"/>\n</form>\n<div class="register-btn fruit-ui-btn fruit-ui-btn-success">注册</div>',el:"#register",initialize:function(a){var b=this;return this.model=a,this.$el.hammer().on("tap",".register-btn",function(){return b.submit()}),this.model.on(""+this.model.type+":success",function(){return history.go(-2)})},render:function(){return this.$el.html(this.tpl)},submit:function(){var a,b,c;if(a=j.escape(this.$el.find(".email").val().replace(/\s/g,"")),b=j.escape(this.$el.find(".passwd").val().replace(/\s/g,"")),c=j.escape(this.$el.find(".re-passwd").val().replace(/\s/g,"")),""===a)return i.open("tip","请填写邮箱"),void 0;if(""===b)i.open("tip","密码不能为空");else{if(b===c)return this.model.get(a,b,c);i.open("tip","两次输入的密码不一致")}}})});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};define("/assets/dist/user/register/model",["../../class/model","../../serverApi","../../http/http","../../message/message","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","underscore","backbone","jquery","hammer","mustache"],function(a,b,c){var d,e;return e=a("../../class/model"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(e),c.exports=d}),define("/assets/dist/user/orderList/orderList",["../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","./view","./model","../../class/model","../../serverApi","../../http/http","../../message/message","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","../../stateMachine/main","jquery","hammer","util","iscroll","backbone","mustache","underscore"],function(a,b,c){var d,e,f,g,h,i;return d=a("jquery"),g=a("../../layout/layout"),d("#scroller .content").append('<div id="orderList"></div>'),f=a("./view"),e=a("./model"),h=a("../../stateMachine/main"),i=new f(new e("orderList")),c.exports=function(a){switch(i.reload(a),h.orderList.active(),a){case"inOrders":return g({type:"location",position:"进行中的订单"});case"completeOrders":return g({type:"location",position:"已完成的订单"});default:return g({type:"location",position:"进行中的订单"})}}}),define("/assets/dist/user/orderList/view",["../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","hammer","backbone","mustache","underscore","util","jquery","iscroll"],function(a,b,c){var d,e,f,g,h;return d=a("hammer"),e=a("backbone"),f=a("mustache"),h=a("underscore"),g=a("../../layout/layout"),c.exports=e.View.extend({tpl:'{{^list}}\n<div class="no-orders">\n对不起，没有找到相应信息的订单!\n</div>\n{{/list}}\n{{#show}}\n<ul class="list">\n{{#list}}\n<li class="order-id" name="#user/orderDetail/{{tradeid}}">\n<div>订单号:<span>{{tradeid}}</span><span class="order-status">{{status}}</span></div>\n<div>金额:<span>￥{{totalfee}}元</span><span class="order-time">{{time}}</span></div>\n</li>\n{{/list}}\n</ul>\n{{/show}}',el:"#orderList",initialize:function(a){return this.model=a,this.model.on(""+this.model.type+":success",this.render,this),this.$el.hammer().on("tap","ul li",function(){var a;return a=d(this).attr("name"),e.Router.prototype.navigate(""+a,{trigger:!0})})},reload:function(a){switch(this.$el.html(""),this.order_type=a,a){case"inOrders":return this.model.get("run");case"completeOrders":return this.model.get("finish");default:return this.model.get("run")}},transeData:function(a){var b,c;return b=new Date(1e3*a.addtime),c=b.getFullYear()+"-"+(b.getMonth()+1)+"-"+b.getDate()+"  "+b.getHours()+":",c+=0===b.getMinutes()?"00":b.getMinutes(),a.time=c,a.totalfee=a.totalfee.toFixed(2)},render:function(a){return a&&h.each(a,this.transeData),this.$el.html(f.render(this.tpl,{list:function(){return a.length>0?a:void 0}(),show:function(){return a.length>0?!0:void 0}()}))}})});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};define("/assets/dist/user/orderList/model",["../../class/model","../../serverApi","../../http/http","../../message/message","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","underscore","backbone","jquery","hammer","mustache"],function(a,b,c){var d,e;return e=a("../../class/model"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(e),c.exports=d}),define("/assets/dist/user/orderDetail/orderDetail",["../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","./view","../../message/message","./model","../../class/model","../../serverApi","../../http/http","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","../../stateMachine/main","jquery","hammer","util","iscroll","backbone","mustache","underscore"],function(a,b,c){var d,e,f,g,h,i;return d=a("jquery"),g=a("../../layout/layout"),d("#scroller .content").append('<div id="orderDetail"></div>'),f=a("./view"),e=a("./model"),h=a("../../stateMachine/main"),i=new f(new e("orderDetail")),c.exports=function(a){return i.reload(a),h.orderDetail.active(),g({type:"location",position:""+a+"号订单"})}}),define("/assets/dist/user/orderDetail/view",["../../message/message","../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","hammer","backbone","mustache","underscore","util","jquery","iscroll"],function(a,b,c){var d,e,f,g,h,i;return d=a("hammer"),e=a("backbone"),g=a("mustache"),f=a("../../message/message"),i=new f,h=a("../../layout/layout"),c.exports=e.View.extend({tpl:'{{^trade}}\n<div class="no-orders">\n对不起，没有找到相应订单信息!\n</div>\n{{/trade}}{{#url}}\n<a href="{{url}}&url=/mobile.html#buy/pay/sucess" class="fruit-ui-btn fruit-ui-btn-success" style="display: block;">\n去支付\n<i class="icon-circle-arrow-right"></i>\n</a>\n{{/url}}{{#trade}}\n<input type="hidden" class="uid" value="{{uid}}"/>\n<div class="order-info" value="{{tradeid}}">\n<div>订单号:<span>{{tradeid}}</span><span class="order-status">{{status}}</span></div>\n<div>金额:<span>￥{{totalfee}}元</span><span class="order-time">{{time}}</span></div>\n</div><div class="address">\n<h2>收获地址</h2>\n<h3>{{receiver_name}}</h3>\n<h3>{{area}}{{address}}</h4>\n<h3>{{phone}}</h3>\n</div>\n{{/trade}}\n<div class="goods">\n<h2>商品详情</h2>\n{{#order_list}}\n<div class="goods-detail">\n<a href="#commodity/item/{{itemid}}" class="thumb">\n<img src="{{itemimg}}" alt="商品图片" />\n</a>\n<div class="goods-des">\n<h3>{{itemname}}</h3>\n<h4>单价:{{price}}</h4>\n<h4>数量:{{num}}</h4>\n<h4>小计:￥{{itemfee}}元</h4>\n</div>\n</div>\n{{/order_list}}\n<span class="clear"></span>\n</div>{{#cancel}}\n<div class="cancel-btn fruit-ui-btn">取消订单</div>\n{{/cancel}}',el:"#orderDetail",initialize:function(a){var b;return this.model=a,b=this,this.model.on(""+this.model.type+":success",this.render,this),this.model.on("cancelOrder:success",function(){return i.open("success","取消订单成功"),e.Router.prototype.navigate("user/orderList/inOrders",{trigger:!0})}),this.$el.hammer().on("tap",".cancel-btn",function(){return b.model.cancelOrder(b.$el.find(".order-info").attr("value"))})},reload:function(a){return this.$el.html(""),this.model.get(a)},transeData:function(a){var b,c;return b=new Date(1e3*a.addtime),c=b.getFullYear()+"-"+(b.getMonth()+1)+"-"+b.getDate()+"  "+b.getHours()+":",c+=0===b.getMinutes()?"00":b.getMinutes(),a.time=c,a.totalfee=a.totalfee.toFixed(2)},render:function(a){return this.transeData(a.trade),a.trade.receiver_province&&(a.trade.area="四川省成都市电子科技大学清水河校区"),this.$el.html(g.render(this.tpl,{trade:a.trade,order_list:a.order_list,url:a.url,cancel:function(){return"未支付"===a.trade.status?!0:void 0}()}))}})});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};define("/assets/dist/user/orderDetail/model",["../../class/model","../../serverApi","../../http/http","../../message/message","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","underscore","backbone","jquery","hammer","mustache"],function(a,b,c){var d,e,f,g,h;return f=a("../../class/model"),d=a("../../serverApi"),g=a("../../http/http"),h=new f("orderList"),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.cancelOrder=function(){var a,b;return a=Array.prototype.slice.call(arguments),b={},d.cancelOrder.key.forEach(function(c,d){return a[d]?b[c]=a[d]:void 0}),g({url:d.cancelOrder.url,data:b,caller:this,namespace:"cancelOrder",map:d.cancelOrder.map})},b}(f),c.exports=e}),function(){define("/assets/dist/buy/buy",["./cart/cart","./cart/read/read","../stateMachine/main","../layout/layout","../layout/nav/nav","../stateMachine/nav","../layout/main/main","../plugin/imgLoad/imgLoad","./cart/read/view","./cart/update/update","./cart/update/view","../plugin/titleFit/titleFit","./cart/delete/delete","../message/message","./cart/delete/model","../class/model","../serverApi","../http/http","../plugin/mapping/mapping","../error/error","../remoteLog/log","../cache/cache","./cart/update/model","./cart/read/model","./generateOrder/generateOrder","./generateOrder/view","./pay/pay","./pay/view","./generateOrder/model","backbone","jquery","util","hammer","iscroll","mustache","underscore"],function(a,b,c){var d,e,f;return d=a("./cart/cart"),e=a("./generateOrder/generateOrder"),f=a("./pay/pay"),c.exports=function(a,b){switch(a){case"cart":return d(b);case"generateOrder":return e(b);case"pay":return f(b);default:return d(b)}}})}.call(this),define("/assets/dist/buy/cart/cart",["./read/read","../../stateMachine/main","../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","./read/view","./update/update","./update/view","../../plugin/titleFit/titleFit","./delete/delete","../../message/message","./delete/model","../../class/model","../../serverApi","../../http/http","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","./update/model","./read/model","backbone","jquery","util","hammer","iscroll","mustache","underscore"],function(a,b,c){var d,e;return d=a("backbone"),d.Events.on("createCart:success",function(a){return $("#cart-button .num").html(a.list.length)}),d.Events.on("updateCart:success",function(a){var b;return 0===a.list.length?(b='<span style="color: #FFF;">0</span>',$("#cart-button .num").html(b),!1):$("#cart-button .num").html(a.list.length)}),d.Events.on("deleteCart:success",function(a){var b;return 0===a.list.length?(b='<span style="color: #FFF;">0</span>',$("#cart-button .num").html(b),!1):$("#cart-button .num").html(a.list.length)}),e=a("./read/read"),c.exports=function(a){switch(a){case"read":return e();default:return e()}}}),define("/assets/dist/buy/cart/read/read",["../../../stateMachine/main","../../../layout/layout","../../../layout/nav/nav","../../../stateMachine/nav","../../../layout/main/main","../../../plugin/imgLoad/imgLoad","./view","../update/update","../update/view","../../../plugin/titleFit/titleFit","../delete/delete","../../../message/message","../delete/model","../../../class/model","../../../serverApi","../../../http/http","../../../plugin/mapping/mapping","../../../error/error","../../../remoteLog/log","../../../cache/cache","../update/model","./model","jquery","backbone","util","hammer","iscroll","mustache","underscore"],function(a,b,c){var d,e,f,g,h,i,j;return d=a("jquery"),d("#scroller .content").append('<div id="cart-read"></div>'),e=a("backbone"),i=a("../../../stateMachine/main"),h=a("../../../layout/layout"),g=a("./view"),f=a("./model"),j=new g(new f("readCart")),c.exports=function(){return e.Router.prototype.navigate("buy/cart/read"),j.reload(),i.readCart.active(),h({type:"location",position:"我的购物车"})}}),define("/assets/dist/buy/cart/read/view",["../update/update","../../../stateMachine/main","../../../layout/layout","../../../layout/nav/nav","../../../stateMachine/nav","../../../layout/main/main","../../../plugin/imgLoad/imgLoad","../update/view","../../../plugin/titleFit/titleFit","../delete/delete","../../../message/message","../delete/model","../../../class/model","../../../serverApi","../../../http/http","../../../plugin/mapping/mapping","../../../error/error","../../../remoteLog/log","../../../cache/cache","../update/model","hammer","backbone","mustache","jquery","util","iscroll","underscore"],function(a,b,c){var d,e,f,g,h;return d=a("hammer"),e=a("backbone"),f=a("mustache"),h=a("../update/update"),g=a("../../../plugin/titleFit/titleFit"),c.exports=e.View.extend({tpl:'{{^is_empty}}\n{{#cart_list}}\n<ul>{{#list}}\n<li class="fruit-ui-arrow-btn" item-id="{{id}}" keyid="{{keyid}}" number="{{number}}" norm-id="{{norm_id}}" >\n<div class="thumb">\n<img src="{{src}}_310x310.jpg" alt="" />\n</div>\n<div class="info">\n<span class="name">{{{name}}} {{norm_name}}</span>{{#norm_price}}\n<span class="price">单价：{{norm_price}}元</span>\n{{/norm_price}}{{^norm_price}}\n<span class="price">单价：{{price}}元</span>\n{{/norm_price}}<span class="number">数量：{{number}}</span><span class="total">小计：{{total}}元</span></div>\n</li>\n{{/list}}</ul><div class="cart-total-price">应付金额：\n<span class="spe">\n{{total}} 元\n</span>\n</div><div class="generate-order fruit-ui-btn fruit-ui-btn-success">\n去结算\n<i class="icon-circle-arrow-right"></i>\n</div>{{/cart_list}}\n{{/is_empty}}\n{{#is_empty}}\n<div class="empty-cart-tip alert alert-success">\n<i class="icon-shopping-cart"></i>\n购物车是空的，快去选购美味吧~&nbsp;&nbsp;\n<i class="icon-circle-arrow-right"></i>\n</div>\n{{/is_empty}}',el:"#cart-read",initialize:function(a){return this.model=a,this.model.on(""+this.model.type+":success",this.render,this),this.$el.on("tap","li",function(){var a,b,c,e;return a=d(this).attr("item-id"),b=d(this).attr("keyid"),c=d(this).attr("norm-id"),e=d(this).attr("number"),h(a,b,e,c)}),this.$el.on("tap",".generate-order",function(){return e.Router.prototype.navigate("buy/generateOrder",{trigger:!0})}),this.$el.on("tap",".empty-cart-tip",function(){return e.Router.prototype.navigate("#commodity/hot",{trigger:!0})})},reload:function(){return this.$el.empty(),this.model.get()},render:function(a){return a.list.forEach(function(a){return a.name=g(a.name)}),this.$el.html(f.render(this.tpl,{cart_list:a,is_empty:function(){return 0===a.list.length?!0:!1}()}))}})}),define("/assets/dist/buy/cart/update/update",["../../../stateMachine/main","../../../layout/layout","../../../layout/nav/nav","../../../stateMachine/nav","../../../layout/main/main","../../../plugin/imgLoad/imgLoad","./view","../../../plugin/titleFit/titleFit","../delete/delete","../../../message/message","../delete/model","../../../class/model","../../../serverApi","../../../http/http","../../../plugin/mapping/mapping","../../../error/error","../../../remoteLog/log","../../../cache/cache","./model","jquery","backbone","util","hammer","iscroll","mustache","underscore"],function(a,b,c){var d,e,f,g,h,i,j,k,l;return d=a("jquery"),d("#scroller .content").append('<div id="cart-update"></div>'),e=a("backbone"),j=a("../../../stateMachine/main"),i=a("../../../layout/layout"),h=a("./view"),f=a("./model"),l=new h(new f("updateCart")),k=function(a,b,c,d){return l.reload(a,b,c,d),j.updateCart.active(),i({type:"location",position:"修改购物车"})},g=e.Router.extend({routes:{"buy/cart/update/:id/keyid/:keyid/number/:number":k,"buy/cart/update/:id/keyid/:keyid/number/:number/norm/":k,"buy/cart/update/:id/keyid/:keyid/number/:number/norm/:norm_id":k}}),new g,c.exports=function(a,b,c,d){return e.Router.prototype.navigate("buy/cart/update/"+a+"/keyid/"+b+"/number/"+c+"/norm/"+d,{trigger:!0})
}}),define("/assets/dist/buy/cart/update/view",["../../../plugin/titleFit/titleFit","../delete/delete","../../../message/message","../delete/model","../../../class/model","../../../serverApi","../../../http/http","../../../plugin/mapping/mapping","../../../error/error","../../../remoteLog/log","../../../cache/cache","hammer","backbone","mustache","underscore","jquery"],function(a,b,c){var d,e,f,g,h,i,j;return d=a("hammer"),e=a("backbone"),g=a("mustache"),j=a("../../../plugin/titleFit/titleFit"),h=a("../delete/delete"),f=a("../../../message/message"),i=new f,c.exports=e.View.extend({tpl:'{{#item}}<div class="box"><div class="thumb">\n<img src="{{src}}" alt="" />\n</div><div class="add-info">\n<span class="comment">好评率:{{comment}}</span>\n<span class="sales">销量:{{sales}}</span>\n<span class="hit">浏览量:{{hit}}</span>\n</div></div><div class="main-info">\n<span class="name">{{{name}}}</span>\n{{^has_norm}}\n<span class="price">{{price}}元</span>\n{{/has_norm}}\n</div><div class="norm-and-number">\n{{#has_norm}}\n<select class="norm">\n{{#norm}}\n<option value="{{norm_id}}" price="{{norm_price}}">{{norm_name}} / {{price}}元</option>\n{{/norm}}\n</select>\n{{/has_norm}}<div class="number fruit-ui-number">\n<span class="minus">\n<i class="icon-minus"></i>\n</span>\n<input type="number" min="1" class="number-value" value="1" />\n<span class="plus">\n<i class="icon-plus"></i>\n</span>\n</div>\n</div>{{^is_update}}\n<div class="add-to-cart fruit-ui-btn fruit-ui-btn-success">\n<i class="icon-plus-sign"></i>\n加入购物车\n</div>\n{{/is_update}}{{#is_update}}\n<div class="update-to-cart fruit-ui-btn fruit-ui-btn-success">\n<i class="icon-ok-sign"></i>\n保存到购物车\n</div><div class="delete-to-cart fruit-ui-btn">\n<i class="icon-minus-sign"></i>\n从购物车中删除\n</div>{{/is_update}}{{/item}}',el:"#cart-update",initialize:function(a){var b=this;return this.model=a,this.model.on("itemDetail:success",this.render,this),this.model.on(""+this.model.type+":success",function(){return history.go(-1),i.open("success","已保存到购物车",1300)}),this.$el.on("tap",".delete-to-cart",function(){var a,c;return a=b.$el.find(".norm").val(),c=b.$el.find(".number-value").val(),h(b.keyid,c,a)}),this.$el.on("tap",".update-to-cart",function(){var a,c;return a=b.$el.find(".norm").val(),c=b.$el.find(".number-value").val(),b.model.set(b.keyid,c,a)})},reload:function(a,b,c,d){return this.id=a,this.keyid=b,this.number=c,this.norm_id=d,this.model.getPlus(a,c,d)},render:function(a){var b;return b=this,a.name=j(a.name,9,12),this.$el.html(g.render(this.tpl,{item:a})),this.$el.find(".number-value").val(this.number),this.norm_id?this.$el.find(".norm").val(this.norm_id):void 0}})}),define("/assets/dist/buy/cart/delete/delete",["../../../message/message","./model","../../../class/model","../../../serverApi","../../../http/http","../../../plugin/mapping/mapping","../../../error/error","../../../remoteLog/log","../../../cache/cache","hammer","underscore","backbone","mustache","jquery"],function(a,b,c){var d,e,f,g,h;return d=a("../../../message/message"),g=new d,f=function(){},e=a("./model"),h=new e("deleteCart"),h.on(""+h.type+":success",function(){return f(),history.go(-1),g.open("success","删除成功",1300)}),c.exports=function(a,b,c,d){return d&&(f=d),h.set(a,b,c)}});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};define("/assets/dist/buy/cart/delete/model",["../../../class/model","../../../serverApi","../../../http/http","../../../message/message","../../../plugin/mapping/mapping","../../../error/error","../../../remoteLog/log","../../../cache/cache","underscore","backbone","jquery","hammer","mustache"],function(a,b,c){var d,e;return e=a("../../../class/model"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.set=function(){return this.get.apply(this,arguments)},b}(e),c.exports=d});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};define("/assets/dist/buy/cart/update/model",["../../../http/http","../../../message/message","../../../plugin/mapping/mapping","../../../error/error","../../../remoteLog/log","../../../class/model","../../../serverApi","../../../cache/cache","jquery","hammer","underscore","backbone","mustache"],function(a,b,c){var d,e,f,g;return f=a("../../../http/http"),e=a("../../../class/model"),g=new e("item"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.set=function(){return this.get.apply(this,arguments)},b.prototype.getPlus=function(a){var b=this;return g.once("item:success",function(c){return c.is_update=!0,c.has_norm=c.norm&&0!==c.norm.length?!0:!1,b.trigger("itemDetail:success",c,{id:a})}),g.get(a)},b}(e),c.exports=d});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};define("/assets/dist/buy/cart/read/model",["../../../class/model","../../../serverApi","../../../http/http","../../../message/message","../../../plugin/mapping/mapping","../../../error/error","../../../remoteLog/log","../../../cache/cache","underscore","backbone","jquery","hammer","mustache"],function(a,b,c){var d,e;return e=a("../../../class/model"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(e),c.exports=d}),function(){define("/assets/dist/buy/generateOrder/generateOrder",["../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","../../stateMachine/main","./view","../../message/message","../pay/pay","../pay/view","./model","../../http/http","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../serverApi","../../class/model","../../cache/cache","jquery","hammer","util","iscroll","backbone","mustache","underscore"],function(a,b,c){var d,e,f,g,h,i;return d=a("jquery"),d("#scroller .content").append('<div id="generate-order"></div>'),g=a("../../layout/layout"),h=a("../../stateMachine/main"),f=a("./view"),e=a("./model"),i=new f(new e("generateOrder")),c.exports=function(){return i.reload(),g({type:"location",position:"结算"}),h.generateOrder.active()}})}.call(this),define("/assets/dist/buy/generateOrder/view",["../../message/message","../pay/pay","../../stateMachine/main","../pay/view","hammer","backbone","mustache","underscore","jquery","util"],function(a,b,c){var d,e,f,g,h,i,j,k,l;return d=a("hammer"),e=a("backbone"),g=a("mustache"),f=a("../../message/message"),i=new f,k=a("../pay/pay"),j=function(){var a,b,c;return c=new Date,a=c.getHours(),b=c.getMinutes(),{h:a,m:b,spe:100*a+b,timestamp:c.valueOf()}},l=function(a){return""===a||void 0===a?(i.open("tip","还没有选择收货人地址哦"),!1):!0},h=function(a,b){var c,e,f,g,i,k,l,m,n,o,p;if(g="#generate-order .delivery-time .m",f=j(),a=Math.abs(a),b)for(h.close_time=b,i=k=n=f.h,o=b.h+1;o>=n?o>k:k>o;i=o>=n?++k:--k)d("#generate-order .delivery-time .h").append('<option value="'+i+'">'+i+"</option>");for(b=h.close_time,a===f.h&&(e=f.m+15,e>60&&(e-=60,d(".other-time .h option").eq(0).remove())),a===b.h&&(c=b.m),e||(e=0),c||(c=60),d(g).empty(),p=[],m=l=e;c>=e?c>l:l>c;m=c>=e?++l:--l)p.push(d(g).append('<option value="'+m+'">'+m+"</option>"));return p},c.exports=e.View.extend({tpl:'<h2>收货人信息</h2>\n<div class="choose-address fruit-ui-arrow-btn" addressid={{address.id}}>\n{{^address.id}}\n<p>选择地址</p>\n{{/address.id}}{{#address.id}}\n<p>{{address.name}}</p>\n<p>\n{{address.detail}}\n{{address.tel}}\n</p>\n{{/address.id}}\n</div><h2>支付方式</h2>\n<ul class="payment fruit-ui-radio">\n<li value="1">支付宝担保交易</li>\n<li class="active" value="2">货到付款</li>\n</ul><h2>送货时间</h2>\n<ul class="delivery-time fruit-ui-radio">\n<li class="active" value="1">立即送货</li>\n<li value="0">\n<span class="tip">其他时间</span>\n<span class="other-time">\n今天\n<select class="h">\n</select>\n时\n<select class="m">\n</select>\n分\n</span>\n</li>\n</ul><h2>订单留言</h2>\n<textarea rows="3" class="order-message" placeholder="如果有特别嘱咐，请在这里留言哦"></textarea><div class="generate fruit-ui-btn fruit-ui-btn-success">\n<i class="icon-ok-sign"></i>\n提交订单\n</div>',el:"#generate-order",initialize:function(a){var b,c;return b=this,this.model=a,this.model.on("all:success",this.render,this),this.model.on(""+this.model.type+":success",function(a){var c;return c=d(b.el).find(".payment .active").attr("value"),k(a,c)}),this.$el.on("change",".delivery-time .h",function(){return h(Math.abs(d(this).val()))}),this.$el.on("tap",".choose-address",function(){return e.Router.prototype.navigate("address",{trigger:!0})}),c=this.$el,a=this.model,this.$el.on("tap",".generate",function(){var b,e,f,g,h,i,j;return d(this).hasClass("disabled")?!1:(d(this).hasClass("disabled"),b=c.find(".choose-address").attr("addressid"),j=1,h=c.find(".delivery-time .h").val()+":"+c.find(".delivery-time .m").val(),g=c.find(".delivery-time .active").attr("value"),f=c.find(".payment .active").attr("value"),e=c.find(".order-message").val(),e&&""!==e||(e=" "),i="",l(b)?a.set(b,j,h,g,f,e,i):void 0)})},reload:function(){return this.$el.empty(),this.model.getAll()},render:function(a){var b,c,d;return d=this,c=a.time.close_time.split(":"),this.close_time={h:Math.abs(c[0]),m:Math.abs(c[1])},this.close_time.spe=100*this.close_time.h+this.close_time.m,c=a.time.open_time.split(":"),this.open_time={h:Math.abs(c[0]),m:Math.abs(c[1])},this.open_time.spe=100*this.open_time.h+this.open_time.m,b=j(),b.spe<this.open_time.spe?(i.open("tip",'<span style="padding:0 10px;">\n好早啊，我们的客服还在睡觉呢，'+this.open_time.h+":"+this.open_time.m+"开始营业哦~\n</span>",3e3),history.go(-1),!1):b.spe>this.close_time.spe?(i.open("tip",'<span style="padding:0 10px;">\n我们的客服已经下班咯，明天'+this.open_time.h+":"+this.open_time.m+"开始营业~晚安~地球人~\n</span>",3e3),history.go(-1),!1):(this.$el.html(g.render(this.tpl,{address:a.address})),h(b.h,this.close_time))}})}),define("/assets/dist/buy/pay/pay",["../../stateMachine/main","./view","jquery","util","backbone","mustache"],function(a,b,c){var d,e,f,g;return d=a("jquery"),d("#scroller .content").append('<div id="buy-pay"></div>'),f=a("../../stateMachine/main"),e=a("./view"),g=new e,c.exports=function(a,b){return f.pay.active(),g.reload(a,b)}}),function(){define("/assets/dist/buy/pay/view",["backbone","mustache"],function(a,b,c){var d,e;return d=a("backbone"),e=a("mustache"),c.exports=d.View.extend({tpl:'{{#is_alipay}}\n<h2>\n您已成功提交订单~\n</h2>\n<h2>\n请在营业时间内付款，否则订单将会被自动作废\n</h2><a href="{{url}}&url=/mobile.html#buy/pay/sucess" class="pay-order-btn fruit-ui-btn fruit-ui-btn-success">\n去支付\n<i class="icon-circle-arrow-right"></i>\n</a>\n{{/is_alipay}}{{^is_alipay}}\n<h2>\n您已成功提交订单~美味即将到达~\n</h2><a href="#" class="fruit-ui-btn fruit-ui-btn-success">继续购物</a>\n<a href="#user/orderDetail/{{id}}" class="fruit-ui-btn">查看订单</a>\n{{/is_alipay}}{{#is_pay_success}}\n<h2>\n支付成功~美味即将到达~\n</h2>\n<a href="#" class="fruit-ui-btn fruit-ui-btn-success">继续购物</a>\n{{/is_pay_success}}',el:"#buy-pay",initialize:function(){},reload:function(a,b){return this.respond=a,this.paymentid=b,this.paymentid=Math.abs(this.paymentid),this.render()},render:function(){var a;return 1===this.paymentid&&(a=!0),"object"!=typeof this.respond&&"string"==typeof this.respond?(this.$el.html(e.render(this.tpl,{is_pay_success:!0})),!1):this.$el.html(e.render(this.tpl,{is_alipay:a,url:this.respond.url,id:this.respond.id}))}})})}.call(this);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};define("/assets/dist/buy/generateOrder/model",["../../http/http","../../message/message","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../serverApi","../../class/model","../../cache/cache","underscore","jquery","hammer","backbone","mustache"],function(a,b,c){var d,e,f,g,h,i,j;return j=a("underscore"),i=a("../../http/http"),d=a("../../serverApi"),f=a("../../class/model"),h=new f("businessHours"),g=new f("getDefaultAddress"),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.collect=function(a){return this.collect.len-=1,a.close_time?this.collect.respond.time=a:this.collect.respond.address=a,0===this.collect.len?this.trigger("all:success",this.collect.respond):void 0},b.prototype.set=function(){return this.get.apply(this,arguments)},b.prototype.getAll=function(){var a=this;return this.collect.len=2,this.collect.respond={time:"",address:""},this.once("time:success",function(b){return a.collect(b)}),this.once("address:success",function(b){return a.collect(b)}),h.once("businessHours:success",function(b){return a.trigger("time:success",b)}),g.once("getDefaultAddress:success",function(b){return a.trigger("address:success",b)}),g.get(),h.get()},b}(f),c.exports=e}),define("/assets/dist/address/address",["./read/read","../layout/layout","../layout/nav/nav","../stateMachine/nav","../layout/main/main","../plugin/imgLoad/imgLoad","./read/view","./read/model","../class/model","../serverApi","../http/http","../message/message","../plugin/mapping/mapping","../error/error","../remoteLog/log","../cache/cache","../stateMachine/main","./create/create","./create/view","./create/model","./update/update","./update/view","./destroy/destroy","./destroy/model","./update/model","jquery","hammer","util","iscroll","backbone","mustache","underscore"],function(a,b,c){var d,e,f;return e=a("./read/read"),d=a("./create/create"),f=a("./update/update"),c.exports=function(a,b){switch(a){case"read":return e();case"create":return d();case"update":return f(b);case"destroy":return destroy(b);default:return e()}}}),define("/assets/dist/address/read/read",["../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","./view","./model","../../class/model","../../serverApi","../../http/http","../../message/message","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","../../stateMachine/main","jquery","hammer","util","iscroll","backbone","mustache","underscore"],function(a,b,c){var d,e,f,g,h,i;return d=a("jquery"),g=a("../../layout/layout"),d("#scroller .content").append('<div id="read-address-list"></div>'),f=a("./view"),e=a("./model"),h=a("../../stateMachine/main"),i=new f(new e("readAddressList")),c.exports=function(){return i.reload(),h.readAddressList.active(),g({type:"location",position:"我的地址列表"})}}),function(){define("/assets/dist/address/read/view",["../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","hammer","backbone","mustache","underscore","util","jquery","iscroll"],function(a,b,c){var d,e,f,g,h;return d=a("hammer"),e=a("backbone"),f=a("mustache"),h=a("underscore"),g=a("../../layout/layout"),c.exports=e.View.extend({tpl:'{{#show}}\n<ul>\n{{#list}}\n<li value="{{addressid}}">\n<h3>{{receiver}}</h3>\n<h3>{{province}}{{city}}{{district}}{{address}}</h3>\n<h3>{{phone}}</h3>\n</li>\n{{/list}}\n</ul>\n{{/show}}\n<div class="add-address fruit-ui-arrow-btn">\n添加新地址\n</div>',el:"#read-address-list",initialize:function(a){return this.model=a,this.model.on(""+this.model.type+":success",this.render,this),this.$el.hammer().on("tap",".add-address",function(){return e.Router.prototype.navigate("address/create",{trigger:!0})}),this.$el.hammer().on("tap","ul li",function(){var a;return a=d(this).val(),e.Router.prototype.navigate("address/update/"+a,{trigger:!0})})},reload:function(){return this.model.get()},transeData:function(a){return"990104"===a.province&&(a.province="四川省"),"990105"===a.city&&(a.city="成都市"),"990106"===a.district?a.district="电子科技大学清水河校区":void 0},render:function(a){return h.each(a,this.transeData),this.$el.html(f.render(this.tpl,{list:a,show:function(){return a.length>0}()}))}})})}.call(this);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};define("/assets/dist/address/read/model",["../../class/model","../../serverApi","../../http/http","../../message/message","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","underscore","backbone","jquery","hammer","mustache"],function(a,b,c){var d,e;return e=a("../../class/model"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(e),c.exports=d}),define("/assets/dist/address/create/create",["../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","./view","../../message/message","./model","../../class/model","../../serverApi","../../http/http","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","../../stateMachine/main","jquery","hammer","util","iscroll","backbone","mustache","underscore"],function(a,b,c){var d,e,f,g,h,i;return d=a("jquery"),g=a("../../layout/layout"),d("#scroller .content").append('<div id="create-address"></div>'),f=a("./view"),e=a("./model"),h=a("../../stateMachine/main"),i=new f(new e("createAddress")),c.exports=function(){return i.render(),h.createAddress.active(),g({type:"location",position:"添加地址"})}}),define("/assets/dist/address/create/view",["../../message/message","../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","hammer","backbone","mustache","underscore","util","jquery","iscroll"],function(a,b,c){var d,e,f,g,h,i,j;return d=a("hammer"),e=a("backbone"),g=a("mustache"),j=a("underscore"),f=a("../../message/message"),i=new f,h=a("../../layout/layout"),c.exports=e.View.extend({tpl:'{{#respond}}\n{{#addressid}}\n<input id="address-id" type="text" value="{{addressid}}" style="display: none"/>\n{{/addressid}}{{#isDelete}}\n<div class="setDefault-btn fruit-ui-btn fruit-ui-btn-success">\n<i class="icon-ok-sign"></i>\n使用并设为默认收货地址\n</div>\n{{/isDelete}}<input id="uid" type="text" value="{{uid}}" style="display: none"/>\n<h2>收货人姓名</h2>\n<input type="text" id="receiver" class="fruit-ui-input" value="{{receiver}}"/>\n<h2>收获人地址</h2><div class="select-area">\n<select id="province" name="" value="{{province}}">\n<option value="990104">四川省</option>\n</select>\n<select id="city" name="" value="{{city}}">\n<option value="990105">成都市</option>\n</select>\n</div><select id="district" name="" value="district">\n<option value="990106">电子科技大学清水河校区</option>\n</select><input type="text" id="address-detail" class="fruit-ui-input" placeholder="详细地址 本科本科22栋222" value="{{address}}"/><h2>联系电话</h2>\n<input type="text" id="phone" class="fruit-ui-input" value="{{phone}}"/>\n<div class="save-btn fruit-ui-btn fruit-ui-btn-success">\n<i class="icon-ok-sign"></i>\n保存\n</div>\n{{/respond}}\n{{#isDelete}}\n<div class="delete-btn fruit-ui-btn">\n<i class="icon-minus-sign"></i>\n删除\n</div>\n{{/isDelete}}',el:"#create-address",initialize:function(a){var b;return this.model=a,b=this,this.model.on("createAddress:success",function(){return i.open("success","成功保存地址信息"),history.go(-1)}),this.$el.hammer().on("tap",".save-btn",function(){var a,c,d,e,f,g,h;return h=j.escape(b.$el.find("#uid").val().replace(/\s/g,"")),g=j.escape(b.$el.find("#receiver").val().replace(/\s/g,"")),f=j.escape(b.$el.find("#province").val().replace(/\s/g,"")),a=j.escape(b.$el.find("#city").val().replace(/\s/g,"")),d=j.escape(b.$el.find("#district").val().replace(/\s/g,"")),c=j.escape(b.$el.find("#address-detail").val().replace(/\s/g,"")),e=j.escape(b.$el.find("#phone").val().replace(/\s/g,"")),""===g?(i.open("tip","请填写收货人姓名"),void 0):""===c?(i.open("tip","请填写详细地址"),void 0):""===e?(i.open("tip","请填写联系电话"),void 0):b.model.get(h,g,f,a,d,c,e)})},render:function(){return this.$el.html(g.render(this.tpl,{respond:!0}))}})});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};define("/assets/dist/address/create/model",["../../class/model","../../serverApi","../../http/http","../../message/message","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","underscore","backbone","jquery","hammer","mustache"],function(a,b,c){var d,e;return e=a("../../class/model"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(e),c.exports=d}),define("/assets/dist/address/update/update",["../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","./view","../../message/message","../destroy/destroy","../destroy/model","../../class/model","../../serverApi","../../http/http","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","./model","../../stateMachine/main","jquery","hammer","util","iscroll","backbone","mustache","underscore"],function(a,b,c){var d,e,f,g,h,i;return d=a("jquery"),g=a("../../layout/layout"),d("#scroller .content").append('<div id="update-address"></div>'),f=a("./view"),e=a("./model"),h=a("../../stateMachine/main"),i=new f(new e("addressDetail")),c.exports=function(a){return i.reload(a),h.updateAddress.active(),g({type:"location",position:"修改我的地址"})}}),define("/assets/dist/address/update/view",["../../message/message","../../layout/layout","../../layout/nav/nav","../../stateMachine/nav","../../layout/main/main","../../plugin/imgLoad/imgLoad","../destroy/destroy","../destroy/model","../../class/model","../../serverApi","../../http/http","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","hammer","backbone","mustache","underscore","util","jquery","iscroll"],function(a,b,c){var d,e,f,g,h,i,j,k;return d=a("hammer"),e=a("backbone"),g=a("mustache"),k=a("underscore"),f=a("../../message/message"),j=new f,i=a("../../layout/layout"),h=a("../destroy/destroy"),c.exports=e.View.extend({tpl:'{{#respond}}\n{{#addressid}}\n<input id="address-id" type="text" value="{{addressid}}" style="display: none"/>\n{{/addressid}}{{#isDelete}}\n<div class="setDefault-btn fruit-ui-btn fruit-ui-btn-success">\n<i class="icon-ok-sign"></i>\n使用并设为默认收货地址\n</div>\n{{/isDelete}}<input id="uid" type="text" value="{{uid}}" style="display: none"/>\n<h2>收货人姓名</h2>\n<input type="text" id="receiver" class="fruit-ui-input" value="{{receiver}}"/>\n<h2>收获人地址</h2><div class="select-area">\n<select id="province" name="" value="{{province}}">\n<option value="990104">四川省</option>\n</select>\n<select id="city" name="" value="{{city}}">\n<option value="990105">成都市</option>\n</select>\n</div><select id="district" name="" value="district">\n<option value="990106">电子科技大学清水河校区</option>\n</select><input type="text" id="address-detail" class="fruit-ui-input" placeholder="详细地址 本科本科22栋222" value="{{address}}"/><h2>联系电话</h2>\n<input type="text" id="phone" class="fruit-ui-input" value="{{phone}}"/>\n<div class="save-btn fruit-ui-btn fruit-ui-btn-success">\n<i class="icon-ok-sign"></i>\n保存\n</div>\n{{/respond}}\n{{#isDelete}}\n<div class="delete-btn fruit-ui-btn">\n<i class="icon-minus-sign"></i>\n删除\n</div>\n{{/isDelete}}',el:"#update-address",initialize:function(a){var b;return this.model=a,b=this,this.model.on(""+this.model.type+":success",this.render,this),this.model.on("saveAddress:success",function(){return j.open("success","成功保存地址信息"),history.go(-1)}),this.model.on("setDefaultAddress:success",function(){return j.open("success","成功设置默认地址"),history.go(-2)}),this.$el.hammer().on("tap",".save-btn",function(){var a,c,d,e,f,g,h;return e=b.$el.find("#address-id").val(),h=k.escape(b.$el.find("#receiver").val().replace(/\s/g,"")),g=b.$el.find("#province").val(),a=b.$el.find("#city").val(),d=b.$el.find("#district").val(),c=k.escape(b.$el.find("#address-detail").val().replace(/\s/g,"")),f=k.escape(b.$el.find("#phone").val().replace(/\s/g,"")),""===h?(j.open("tip","请填写收货人姓名"),void 0):""===c?(j.open("tip","请填写详细地址"),void 0):""===f?(j.open("tip","请填写联系电话"),void 0):b.model.saveAddress(e,h,g,a,d,c,f)}),this.$el.hammer().on("tap",".delete-btn",function(){return h(b.$el.find("#address-id").val(),function(){}),history.go(-1)}),this.$el.hammer().on("tap",".setDefault-btn",function(){return b.model.setDefaultAddress(b.$el.find("#address-id").val())})},reload:function(a){return this.model.get(a)},render:function(a){return this.$el.html(g.render(this.tpl,{respond:a,isDelete:!0}))}})}),define("/assets/dist/address/destroy/destroy",["./model","../../class/model","../../serverApi","../../http/http","../../message/message","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","jquery","underscore","backbone","hammer","mustache"],function(a,b,c){var d,e,f;return d=a("jquery"),e=a("./model"),f=new e("deleteAddress"),c.exports=function(a,b){return f.get(a),f.on("deleteAddress:success",b)}});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};define("/assets/dist/address/destroy/model",["../../class/model","../../serverApi","../../http/http","../../message/message","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","underscore","backbone","jquery","hammer","mustache"],function(a,b,c){var d,e;return e=a("../../class/model"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(e),c.exports=d}),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("/assets/dist/address/update/model",["../../class/model","../../serverApi","../../http/http","../../message/message","../../plugin/mapping/mapping","../../error/error","../../remoteLog/log","../../cache/cache","jquery","underscore","backbone","hammer","mustache"],function(a,c,d){var e,f,g,h,i;return e=a("jquery"),h=a("../../class/model"),f=a("../../serverApi"),i=a("../../http/http"),g=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.saveAddress=function(){var a,b;return a=Array.prototype.slice.call(arguments),b={},f.saveAddress.key.forEach(function(c,d){return a[d]?b[c]=a[d]:void 0}),i({url:f.saveAddress.url,data:b,caller:this,namespace:"saveAddress",map:f.saveAddress.map})},c.prototype.setDefaultAddress=function(){var a,b;return a=Array.prototype.slice.call(arguments),b={},f.setDefaultAddress.key.forEach(function(c,d){return a[d]?b[c]=a[d]:void 0}),i({url:f.setDefaultAddress.url,data:b,caller:this,namespace:"setDefaultAddress",map:f.setDefaultAddress.map})},c}(h),d.exports=g})}.call(this),function(){define("/assets/dist/app",["./guide/guide","./guide/view","./layout/layout","./layout/nav/nav","./stateMachine/nav","./layout/main/main","./plugin/imgLoad/imgLoad","./touch/touch","./plugin/ui/ui","./plugin/ui/number/number","./plugin/ui/radio/radio","./commodity/commodity","./commodity/hot/hot","./stateMachine/main","./commodity/hot/slide/slide","./commodity/hot/slide/view","./commodity/hot/slide/model","./class/model","./serverApi","./http/http","./message/message","./plugin/mapping/mapping","./error/error","./remoteLog/log","./cache/cache","./commodity/hot/list/list","./commodity/hot/list/view","./plugin/countdown/countdown","./commodity/hot/list/model","./commodity/cat/cat","./commodity/cat/view","./commodity/cat/model","./commodity/list/list","./commodity/list/view","./plugin/titleFit/titleFit","./commodity/list/model","./commodity/item/item","./commodity/item/view","./buy/cart/create/create","./buy/cart/create/model","./commodity/item/model","./user/user","./user/entrance/entrance","./user/entrance/view","./user/info/info","./user/info/view","./user/info/model","./user/login/login","./user/login/view","./user/login/model","./user/register/register","./user/register/view","./user/register/model","./user/orderList/orderList","./user/orderList/view","./user/orderList/model","./user/orderDetail/orderDetail","./user/orderDetail/view","./user/orderDetail/model","./buy/buy","./buy/cart/cart","./buy/cart/read/read","./buy/cart/read/view","./buy/cart/update/update","./buy/cart/update/view","./buy/cart/delete/delete","./buy/cart/delete/model","./buy/cart/update/model","./buy/cart/read/model","./buy/generateOrder/generateOrder","./buy/generateOrder/view","./buy/pay/pay","./buy/pay/view","./buy/generateOrder/model","./address/address","./address/read/read","./address/read/view","./address/read/model","./address/create/create","./address/create/view","./address/create/model","./address/update/update","./address/update/view","./address/destroy/destroy","./address/destroy/model","./address/update/model","backbone","jquery","hammer","mustache","iscroll","util","underscore"],function(a,b,c){var d,e,f,g,h,i,j,k,l;return e=a("backbone"),d=a("jquery"),a("./guide/guide"),j=a("./layout/layout"),j(),a("./touch/touch"),a("./plugin/ui/ui"),a("./plugin/imgLoad/imgLoad"),i=a("./commodity/commodity"),l=a("./user/user"),h=a("./buy/buy"),f=a("./address/address"),k=e.Router.extend({routes:{"(:module)":"index","(:module/:action)":"index","(:module/:action/:paramter)":"index"},index:function(a,b,c){switch(d("#error").hide(),a){case"commodity":return i(b,c);case"user":return l(b,c);case"buy":return h(b,c);case"address":return f(b,c);default:return i(b,c)}}}),g=new k,e.history.start(),c.exports=g})}.call(this),seajs.use("/assets/dist/app");